<!doctype html>
<html lang="en" data-theme="auto">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>gh_docs_bot: overview</title>

    <link rel="stylesheet" href="https://zheng-bote.github.io/gha_ghpages/assets/css/tokens.css" />
    <link rel="stylesheet" href="https://zheng-bote.github.io/gha_ghpages/assets/css/layouts.css" />
    <link rel="stylesheet" href="https://zheng-bote.github.io/gha_ghpages/assets/css/fluid.css" />

    <meta
      name="description"
      content="gh_docs_bot is a high-performance, custom C++ Static Site Generator (SSG) packaged as a reusable GitHub Action. It is designed to automatically build and deploy static documentation websites from Markdown and HTML files directly within your GitHub workflows."
    />
    <meta
      name="keywords"
      content="Github Action, Static Site Generator, SSG, Documentation, Markdown, HTML, GitHub Workflows, ZHENG Robert, Robert Zheng, ZHENG Bote, 郑 伯特"
    />
    <meta name="author" content="Zheng Robert" />

    <meta name="robots" content="index, follow" />
    <meta name="googlebot" content="index, follow" />

    <link
      rel="icon"
      type="image/svg+xml"
      href="https://zheng-bote.github.io/gha_ghpages/assets/img/favicon.svg"
    />
    <link rel="shortcut icon" href="https://zheng-bote.github.io/gha_ghpages/assets/img/favicon.ico" />
  </head>

  <body class="app-shell">
    <header class="site-header">
      <div class="header-left">
        <img
          src="https://zheng-bote.github.io/gha_ghpages/assets/img/favicon.svg"
          alt="Logo"
          title="Home"
          loading="eager"
        />gh_docs_bot
      </div>
      <div class="header-center">overview</div>
      <div class="header-right flex items-center justify-end gap-3">
        <select id="themeSelect" class="select-control" style="width: auto">
          <option value="blue">Blue</option>
          <option value="emerald">Emerald</option>
          <option value="amber">Amber</option>
          <option value="berry">Berry</option>
          <option value="violet">Violet</option>
          <option value="slate">Slate</option>
          <option value="cyan">Cyan</option>
          <option value="blue2">Blue 2</option>
          <option value="matrix">Matrix</option>
          <option value="tron">Tron</option>
        </select>
        <button id="themeToggle" class="btn btn-icon btn-ghost">
          <span id="themeIcon"></span>
        </button>
      </div>
    </header>

    <div class="layout-with-sidebar">
      <aside class="sidebar"><ul class="nav-list">
  <li><strong>architecture</strong>
<ul class="nav-list">
  <li><a href="../architecture/overview.html" class="active">overview</a></li>
</ul>
  </li>
  <li><strong>build</strong>
<ul class="nav-list">
  <li><a href="../build/Readme.html">Readme</a></li>
</ul>
  </li>
  <li><strong>howtos</strong>
<ul class="nav-list">
  <li><a href="../howtos/Github_Action.html">Github Action</a></li>
  <li><a href="../howtos/static_website.html">static website</a></li>
</ul>
  </li>
  <li><strong>screenshots</strong>
<ul class="nav-list">
  <li><a href="../screenshots/themes.html">themes</a></li>
</ul>
  </li>
  <li><strong>themes</strong>
<ul class="nav-list">
  <li><a href="../themes/Fluid_UI.html">Fluid UI</a></li>
</ul>
  </li>
</ul>
</aside>

      <main class="site-main"><h1>GHP Static Site Generator - Architecture &amp; Design</h1>
<p>comprehensive architecture documentation for the GHP Static Site Generator (v1.x.x). It includes high-level concepts, data flow, internal components, and diagrams using Mermaid syntax (standard for GitHub Markdown).</p>
<hr>
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<h2>Table of Contents</h2>
<ul class="toc-level-2">
<li><a href="#architecture-overview">Architecture Overview</a></li>
<li><a href="#system-overview">System Overview</a></li>
<ul class="toc-level-3">
<li><a href="#key-features">Key Features</a></li>
</ul>
<li><a href="#high-level-architecture">High-Level Architecture</a></li>
<li><a href="#core-workflow">Core Workflow</a></li>
<li><a href="#component-design">Component Design</a></li>
<ul class="toc-level-3">
<li><a href="#data-structures">Data Structures</a></li>
<li><a href="#key-logic-units">Key Logic Units</a></li>
<ul class="toc-level-4">
<li><a href="#tree-builder-buildtree">Tree Builder (buildTree)</a></li>
<li><a href="#navigation-generator-generatenavhtml">Navigation Generator (generateNavHtml)</a></li>
<li><a href="#content-processor">Content Processor</a></li>
<li><a href="#template-injection-inja">Template Injection (Inja)</a></li>
</ul>
</ul>
<li><a href="#file-system-structure">File System Structure</a></li>
<ul class="toc-level-3">
<li><a href="#input-structure-example">Input Structure (Example)</a></li>
<li><a href="#design-structure-example">Design Structure (Example)</a></li>
<li><a href="#output-structure-example">Output Structure (Example)</a></li>
</ul>
<li><a href="#dependencies-amp-libraries">Dependencies &amp; Libraries</a></li>
<li><a href="#configuration-reference">Configuration Reference</a></li>
<li><a href="#build-amp-deployment">Build &amp; Deployment</a></li>
<ul class="toc-level-3">
<li><a href="#compilation">Compilation</a></li>
<li><a href="#execution">Execution</a></li>
<ul class="toc-level-4">
<li><a href="#inputs">Inputs</a></li>
</ul>
</ul>
</ul>

<!-- END doctoc generated TOC please keep comment here to allow auto update -->
<hr>
<h2 id="architecture-overview">Architecture Overview</h2>

<p>das ist der base_path: https://zheng-bote.github.io/gha_ghpages/</p>

<ul>
<li>Version: 1.x.x</li>
<li>Language: C++23</li>
<li>License: MIT</li>
<li>command line tool</li>
<li>Platform: Linux, macOS</li>
</ul>
<h2 id="system-overview">System Overview</h2>
<p>The GHP Static Site Generator is a high-performance console application designed to convert a recursive directory structure of content files into a fully navigational static HTML website. It supports Markdown (.md) for content authoring and raw HTML fragments (.htm) for custom layouts, wrapping them into a customizable Inja template.</p>
<h3 id="key-features">Key Features</h3>
<ul>
<li><strong>Recursive Scanning</strong>: Maps arbitrary folder depths.</li>
<li><strong>Hybrid Parsing</strong>:<ul>
<li>*.md files are parsed to HTML via md4c.</li>
<li>*.htm files are injected as raw content fragments.</li>
</ul>
</li>
<li><strong>Automated Navigation</strong>: Generates a recursive Side-Nav HTML structure based on the file system.</li>
<li><strong>Root Isolation</strong>: Files in the root directory are generated but excluded from the navigation tree to keep the menu clean.</li>
<li><strong>Asset Management</strong>: Automatically copies theme assets (CSS, JS, Images) from a configured source.</li>
<li><strong>Templating</strong>: Uses Inja for variable substitution (Title, Navigation, Content, Base Path).</li>
</ul>
<h2 id="high-level-architecture">High-Level Architecture</h2>
<p>The system operates on a linear Pipeline Pattern. It takes three primary inputs (Configuration, Content, Template) and produces a directory of static HTML files.</p>
<img src="https://zheng-bote.github.io/gha_ghpages/assets/img_tmp/high-level-architecture_pipeline-pattern.png" alt="Pipeline">
<h2 id="core-workflow">Core Workflow</h2>
<p>The main() function orchestrates the lifecycle of the generation process.</p>
<p>Execution Flow Diagram</p>
<img src="https://zheng-bote.github.io/gha_ghpages/assets/img_tmp/high-level-architecture_execution-flow.png" alt="Execution Flow">
<h2 id="component-design">Component Design</h2>
<p>The application is structured around data-driven components.</p>
<h3 id="data-structures">Data Structures</h3>
<p><strong>DirNode (The File Tree)</strong></p>
<p>Represents the recursive file system structure in memory.</p>
<pre><code class="language-C++">struct DirNode {
  fs::path relativePath;        // Path relative to input root
  std::string dirName;          // Name of the current folder
  std::vector&lt;fs::path&gt; files;  // .md and .htm files in this folder
  std::vector&lt;DirNode&gt; subdirs; // Nested directories
};
</code></pre>
<p><strong>Config</strong></p>
<p>Holds runtime settings loaded from the .cfg file.</p>
<pre><code class="language-C++">struct Config {
  fs::path templatePath; // Path to template.html
  fs::path outputDir;    // Destination folder
  fs::path assetsPath;   // Source assets folder (images/css)
};
</code></pre>
<h3 id="key-logic-units">Key Logic Units</h3>
<h4 id="tree-builder-buildtree">Tree Builder (buildTree)</h4>
<p><strong>Role:</strong> Scans the input directory.</p>
<p><strong>Filters:</strong></p>
<ul>
<li>Ignores files/folders starting with . (hidden files).</li>
<li>Ignores the folder named assets (to prevent recursion loops if source and output overlap, and to keep navigation clean).</li>
<li>Only accepts .md and .htm files.</li>
</ul>
<p><strong>Sorting:</strong> Sorts directories and files alphabetically for consistent navigation order.</p>
<h4 id="navigation-generator-generatenavhtml">Navigation Generator (generateNavHtml)</h4>
<p><strong>Role:</strong> Creates the HTML <ul><li> structure for the sidebar.</p>
<p><strong>Logic:</strong></p>
<ul>
<li>Receives the full rootNode to generate the complete menu for every page.</li>
<li><strong>Root Exclusion:</strong> Accepts an isRoot flag. If true, files in the top-level directory (like index.md) are not added to the navigation list, but subdirectories are. This prevents the &quot;Home&quot; page or loose root files from cluttering the menu.</li>
<li><strong>Active State:</strong> Compares the current file path with the link target to add class=&quot;active&quot; for CSS highlighting.</li>
<li><strong>Hierarchy:</strong> Renders folders as <strong>DirectoryName</strong> and nests files inside.</li>
</ul>
<h4 id="content-processor">Content Processor</h4>
<ul>
<li><strong>Markdown:</strong> Uses md4c-html to convert Markdown text into safe HTML.</li>
<li><strong>HTML Fragments:</strong> .htm files are read as plain text and injected directly. This allows specific pages to use complex HTML layouts (grids, cards) that Markdown cannot express.</li>
</ul>
<h4 id="template-injection-inja">Template Injection (Inja)</h4>
<p>Merges the processed data into the HTML skeleton.</p>
<p><strong>JSON Context Data:</strong></p>
<ul>
<li>base_path: Relative path back to root (e.g., ../../) for linking CSS/JS correctly from subfolders.</li>
<li>title: Filename without extension.</li>
<li>navigation: The generated sidebar HTML string.</li>
<li>content: The converted page body.</li>
</ul>
<h2 id="file-system-structure">File System Structure</h2>
<h3 id="input-structure-example">Input Structure (Example)</h3>
<pre><code class="language-bash">docs/
├── architecture
│   └── overview.md
├── howtos
│   ├── github_action.md
│   └── static_website.md
├── index.md
└── screenshots
    └── themes.htm
</code></pre>
<h3 id="design-structure-example">Design Structure (Example)</h3>
<pre><code class="language-bash">theme/blue/
├── assets
│   ├── css
│   │   └── main.css
│   ├── favicon.ico
│   ├── favicon.svg
│   ├── img
│   │   ├── blue_dark.png
│   │   ├── blue_light.png
│   │   ├── favicon.svg
│   │   ├── matrix.png
│   │   ├── themes.png
│   │   └── tron.png
│   └── js
│       └── main.js
├── assets copy
└── blue.cfg
</code></pre>
<h3 id="output-structure-example">Output Structure (Example)</h3>
<pre><code class="language-bash">/dist/
├── architecture
│   └── overview.html
├── howtos
│   ├── github_action.html
│   └── static_website.html
├── index.html
└── screenshots
    └── themes.html
</code></pre>
<h2 id="dependencies-amp-libraries">Dependencies &amp; Libraries</h2>
<table>
<thead>
<tr>
<th align="left">Library</th>
<th align="left">Purpose</th>
<th align="left">Rationale</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">std::filesystem</td>
<td align="left">File I/O</td>
<td align="left">C++ Standard (modern, cross-platform).</td>
</tr>
<tr>
<td align="left">nlohmann/json</td>
<td align="left">Data Structure</td>
<td align="left">Standard for passing data to template engines.</td>
</tr>
<tr>
<td align="left">pantor/inja</td>
<td align="left">Templating</td>
<td align="left">Fast, Python/Jinja2-like syntax for C++</td>
</tr>
<tr>
<td align="left">md4c</td>
<td align="left">Markdown</td>
<td align="left">Extremely fast, compliant C markdown parser</td>
</tr>
</tbody>
</table>
<h2 id="configuration-reference">Configuration Reference</h2>
<pre><code class="language-ini">
# Path to the HTML layout file
template=/path/to/theme/desktop/fluid_template.html

# Folder containing CSS/Images/JS to be copied
assets=/path/to/theme/fluid/assets

# Target directory for the website
output=/path/to/dist

# Base path for the website
base_path=https://zheng-bote.github.io/gha_ghpages/

# Enable table of contents
toc=true
</code></pre>
<h2 id="build-amp-deployment">Build &amp; Deployment</h2>
<h3 id="compilation">Compilation</h3>
<p>Requires a C++23 compliant compiler (GCC/Clang) and the linked libraries.</p>
<p><em>Linux Example:</em></p>
<pre><code class="language-bash">g++ -std=c++23 -o ssg main.cpp -lmd4c-html -lmd4c
</code></pre>
<blockquote>
<p>![TIP]
see <code>CMakeLists.txt</code> for more details</p>
</blockquote>
<h3 id="execution">Execution</h3>
<p><code>Usage: build/gh_docs_bot &lt;path_to_config&gt; &lt;input_folder&gt;</code></p>
<p><strong><em>Example</em></strong></p>
<p><code>./gh_docs_bot /home/zb_bamboo/DEV/gh-a_cr-ghp/theme/blue/blue.cfg /home/zb_bamboo/DEV/gh-a_cr-ghp/docs</code></p>
<h4 id="inputs">Inputs</h4>
<table>
<thead>
<tr>
<th align="left">Input</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>path_to_config</code></td>
<td align="left">Path to the config file to use for the site.</td>
</tr>
<tr>
<td align="left"><code>path_to_docs</code></td>
<td align="left">Path to the input directory to use for the site.</td>
</tr>
</tbody>
</table>
</main>
    </div>

    <button id="scrollTopBtn" class="scroll-top-btn" aria-label="Nach oben">
      <svg
        width="18"
        height="18"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M12 19V5" />
        <path d="M5 12l7-7 7 7" />
      </svg>
    </button>

    <footer class="site-footer">
      <div class="footer-left">gh_docs_bot v1.8.0</div>
      <div class="footer-center">
        <a
          href="https://www.robert.hase-zheng.net/"
          alt="Homepage"
          title="Homepage"
          >© 2026 ZHENG Robert</a
        >
      </div>
      <div class="footer-right">
        <a
          href="https://github.com/Zheng-Bote/gha_ghpages"
          alt="Github"
          title="Github"
          >&lt;/&gt;</a
        >
      </div>
    </footer>

    <script>
      let brand = document.querySelector(".header-left");
      brand.addEventListener("click", () => {
        window.location.href = "https://zheng-bote.github.io/gha_ghpages/";
      });
    </script>
    <script>
      // Theme
      const root = document.documentElement;
      const themeToggle = document.getElementById("themeToggle");
      const themeIcon = document.getElementById("themeIcon");
      const themeSelect = document.getElementById("themeSelect");

      // Reihenfolge der Modi
      const modes = ["auto", "light", "dark"];

      // gespeicherte Werte laden
      let currentTheme = localStorage.getItem("theme") || "blue";
      let currentMode = localStorage.getItem("mode") || "auto";

      // Attribute setzen
      root.setAttribute("data-theme", currentTheme);
      root.setAttribute("data-mode", currentMode);

      // Select initialisieren
      if (themeSelect) {
        themeSelect.value = currentTheme;

        themeSelect.addEventListener("change", () => {
          currentTheme = themeSelect.value;
          root.setAttribute("data-theme", currentTheme);
          localStorage.setItem("theme", currentTheme);
        });
      }

      // Icon initial setzen
      updateThemeIcon(currentMode);

      // Klick → nächsten Modus aktivieren
      themeToggle.addEventListener("click", () => {
        const nextIndex = (modes.indexOf(currentMode) + 1) % modes.length;
        currentMode = modes[nextIndex];

        root.setAttribute("data-mode", currentMode);
        localStorage.setItem("mode", currentMode);

        updateThemeIcon(currentMode);
      });

      // Icon-Setter
      function updateThemeIcon(mode) {
        if (mode === "light") {
          themeIcon.innerHTML = `<img src="https://zheng-bote.github.io/gha_ghpages/assets/icons/sun.svg" width="18" height="18" alt="Light">`;
        } else if (mode === "dark") {
          themeIcon.innerHTML = `<img src="https://zheng-bote.github.io/gha_ghpages/assets/icons/moon.svg" width="18" height="18" alt="Dark">`;
        } else {
          themeIcon.innerHTML = `<img src="https://zheng-bote.github.io/gha_ghpages/assets/icons/sun-moon.svg" width="18" height="18" alt="Auto">`;
        }
      }

      /* --- Theme Preview Cards → Theme setzen --- */
      document.querySelectorAll("[data-theme-preview]").forEach((card) => {
        card.addEventListener("click", () => {
          const theme = card.getAttribute("data-theme-preview");
          root.setAttribute("data-theme", theme);
          localStorage.setItem("theme", theme);

          const themeSelect = document.getElementById("themeSelect");
          if (themeSelect) {
            themeSelect.value = theme;
          }
        });
      });
    </script>
    <script>
      // Utilities
      /* -- Scroll to Top Button -- */
      const scrollBtn = document.getElementById("scrollTopBtn");
      const header = document.querySelector(".site-header");

      // Sichtbarkeit steuern
      window.addEventListener("scroll", () => {
        const headerBottom = header.getBoundingClientRect().bottom;

        if (headerBottom < -20) {
          scrollBtn.classList.add("visible");
        } else {
          scrollBtn.classList.remove("visible");
        }
      });

      // Smooth Scroll nach oben
      scrollBtn.addEventListener("click", () => {
        window.scrollTo({
          top: 0,
          behavior: "smooth",
        });
      });
      /* -- Ende Scroll to Top Button -- */

      // Accordion
      document.querySelectorAll(".accordion-header").forEach((header) => {
        header.addEventListener("click", () => {
          const item = header.closest(".accordion-item");
          item.classList.toggle("is-open");
        });
      });

      // Toast helper
      function showToast(message, type = "info") {
        let container = document.querySelector(".toast-container");
        if (!container) {
          container = document.createElement("div");
          container.className = "toast-container";
          document.body.appendChild(container);
        }

        const toast = document.createElement("div");
        toast.className = "toast";
        toast.textContent = message;

        if (type === "success") toast.classList.add("success-msg");
        if (type === "error") toast.classList.add("error-msg");
        if (type === "warning") toast.classList.add("warning-msg");
        if (type === "info") toast.classList.add("info-msg");

        container.appendChild(toast);

        setTimeout(() => {
          toast.remove();
        }, 3000);
      }

      // Modal helper (generic)
      function openModal(id) {
        const backdrop = document.getElementById(id);
        if (backdrop) backdrop.classList.add("is-open");
      }

      function closeModal(id) {
        const backdrop = document.getElementById(id);
        if (backdrop) backdrop.classList.remove("is-open");
      }

      // Gallery Modal
      const imageModal = document.getElementById("imageModal");
      const modalImage = document.getElementById("modalImage");
      const modalCaption = document.getElementById("modalCaption");

      document.querySelectorAll(".gallery figure").forEach((fig) => {
        fig.addEventListener("click", () => {
          const src = fig.getAttribute("data-modal-image");
          const caption = fig.querySelector("figcaption")?.textContent || "";
          modalImage.src = src;
          modalCaption.textContent = caption;
          openModal("imageModal");
        });
      });
      document.querySelectorAll(".gallery-2 figure").forEach((fig) => {
        fig.addEventListener("click", () => {
          const src = fig.getAttribute("data-modal-image");
          const caption = fig.querySelector("figcaption")?.textContent || "";
          modalImage.src = src;
          modalCaption.textContent = caption;
          openModal("imageModal");
        });
      });

      // Close modal on backdrop click
      imageModal.addEventListener("click", (e) => {
        if (e.target === imageModal) {
          closeModal("imageModal");
        }
      });

      // =========================================================
      // Lazy Loading for Gallery Images
      // =========================================================

      const lazyImages = document.querySelectorAll(".lazy-img");

      const lazyObserver = new IntersectionObserver(
        (entries, observer) => {
          entries.forEach((entry) => {
            if (!entry.isIntersecting) return;

            const img = entry.target;
            const realSrc = img.getAttribute("data-src");

            if (realSrc) {
              img.src = realSrc;
              img.onload = () => img.classList.add("loaded");
            }

            observer.unobserve(img);
          });
        },
        {
          rootMargin: "200px 0px", // lädt frühzeitig
          threshold: 0.01,
        },
      );

      lazyImages.forEach((img) => lazyObserver.observe(img));
      // =========================================================
    </script>
  </body>
</html>
